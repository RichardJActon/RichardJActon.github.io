{
  "hash": "42b2ece1e2440be64cad462b69b853fc",
  "result": {
    "markdown": "---\ntitle: Advanced Rmarkdown YAML headers\ndescription: \"Rnotebooks are scientific notebooks for R, somewhat like jupyter for anyone coming from python\"\nauthor: \"Richard J. Acton\"\ndate: \"2019-04-24\"\ncategories:\n  - R\nexecute: \n  eval: false\n---\n\n\n# Rnotebooks - What and Why?\n\nFor anyone unfamiliar with [Rnotebooks][1] here is a quick overview of why you might want to use them more experienced users can [skip ahead](#body). Rnotebooks are scientific notebooks for `R`, somewhat like [jupyter](https://jupyter.org/) for anyone coming from `python` but baked right into the Rstudio IDE which offers some benefits over the browser based interface of jupyter. It permits you to organise your code, notes, reasoning and references in one place. Combining Rnotebooks with a version management system such as git gives a robustness similar paper lab book records when it comes to seeing what you did and when coupled with dynamism, portability, share-ability and ease of backup of electronic working. Rnotebooks use a simple flavour of markdown with options to render output to HTML and PDF (via LaTeX) formats. Rnotebooks also have big pluses for reproducibility, creating an Rnotebook that does, explains and references your analysis makes it very easy to give to another at least somewhat competent `R` user and have them re-run your analysis - potentially with their own variants. Reproducibility and verifiability are substantial issues in scientific computing, including my own field of biology. [A recent article in PeerJ](https://doi.org/10.7717/peerj-cs.158) provides a nice discussion of these issues and a look at what the future of scientific computing notebooks might resemble.\n\n## Basic Structure\n\nRaw Rmarkdown looks like this:\n\n\t---\n\ttitle: \"Example Rnotebook\" # a yaml header with document properties and options\n\t---\n\t\n\t# Introduction\n\n\tMardown formatted text, with __Bold__ and *exciting!* Scientific claims\n\tabout $in-line math^2$ at least according to @Smith2007.\n\n\n\t::: {.cell}\n\t\n\t```{.r .cell-code}\n\tprint(\"some actual R code in chunks\")\n\t```\n\t:::\n\n\n\tsaved with a .Rmd file extension\n\nRstudio of course adds nice syntax highlighting, and various bells and whistles.\n\n# The acctual YAML header stuff {#body}\n\n## Inline R {#inliner}\n\nYou can use inline `R` in the YAML header of an Rnotebook to produce dynamic content. This takes the general form: \n  \n  ```yaml\n  option: \"<some R>\"\n  ```\n\nFor example you can include the current date with: \n  \n  ```yaml\n  date: \"2022-12-10\"\n  ``` \n\nI'm partial to the YYYY-MM-DD format due to it's unambiguousness and nice sorting behaviour but you can of course employ `format()` to render the date in other ways.\n\n## Params\n\nThe params option allows you to add arguments to your Rnotebook. The params you add to your header are accessible from within the notebook from the immutable `params` list. Rstudio makes the contents of this list available in interactive sessions so you can use them whilst working on your code not just when you build the notebook. Note that you can reference `params` in other options ([see](#bibyaml)).\n\n  ```yaml\n  ---\n  params:\n    includeThing: TRUE # set the default to TRUE\n  ---\n  ```\n\n\n\n\n\t::: {.cell}\n\t\n\t```{.r .cell-code}\n\tprint(\n\t\tpaste0(\n\t\t\t\"Some R that is only evaluated if and included in the notebook if\",\n\t\t\t\" params$includeThing is true\"\n\t\t)\n\t)\n\t```\n\t\n\t::: {.cell-output .cell-output-stdout}\n\t```\n\t[1] \"Some R that is only evaluated if and included in the notebook if params$includeThing is true\"\n\t```\n\t:::\n\t:::\n\n\n\n## Document Format Options\n\nFor an HTML output these are a few of my favourite options. There are numerous additional options described in the [outputs section](https://bookdown.org/yihui/rmarkdown/documents.html) of the manual, setting the depth of the table of contents for example.\n\n  ```yaml\n  ---\n  output:\n    html_document:\n      df_print: paged       # print paged tables - like the default 'html_notebook' format\n      fig_caption: yes\n      number_sections: yes  # prepend x.y style numbering to you sections\n      toc: yes              # Add a table of contents\n      toc_float: yes        # have to TOC float at the side of your HTML page so you do have to keep scrolling to the top\n  ---\n  ```\n\nFor a PDF output `pdf_document` can be used instead of `html_document` though my preferred table format for PDF is `df_print: kable`. More advanced LaTeX customisations can also be used in conjunction with PDF outputs.\n\n## Bibliograghy and Citation YAML options {#bibyaml}\n\nPlacing a `bibliography` option in your Rnotebook's header and pointing it to a bibtex file containing your citation information permits you to create citations in Rnotebooks using the following syntax: `@Smith2016` for an in-line citation e.g. 'work by Smith *et al.* 2016 showed that cheese...' or `[@Smith2016]` for a reference like this: 'assertion (Smith *et al.* 2016)', or even lists of citations to be contracted where possible given the citation style e.g. `[@Smith2016; @Jones2018]`, (note the semi-colon list separator) yielding something like this: 'assertion [1-2]'\n\nI frequently use a header that contains code like this:\n  \n  ```yaml\n  ---\n  bibliography: \"bib.bib\"\n  params:\n    bib: \"~/Documents/bibtex/library.bib\"\n  ---\n  ```\n\nThe reason I do this is my bibliography has the same path relative to my home directory on my laptop, desktop and computing clusters but the absolute paths differ and __these headers seem to prefer absolute paths__. Thus, if I compose a notebook on one system it won't execute on another unless I change the path or use a set-up like this to do so dynamically when building the notebook.  \n\nI also frequently set the path to my working directory as a parameter to my Rnotebooks and use relative paths to any files I want to load/write in the body of the Rnotebook so as to achieve similar portability between the different system's I work on as I get with my bibliography files.\n\nThe following chunk sets the working directory for when you 'knit' your Rnotebook into the desired format in the first line and for interactive sessions in the second.\n\n\n\t::: {.cell}\n\t\n\t```{.r .cell-code}\n\tknitr::opts_knit$set(root.dir = normalizePath(params$pwd))\n\tsetwd(params$pwd)\n\t```\n\t:::\n\n\n\n__A note on generating your bibtex file(s).__ I currently use [Mendeley](https://www.mendeley.com/) as my refernce manager and it has a nice bibtext output option which is automatically updated whenever you sync (On balance I would probably recomend [Zotero](https://www.zotero.org/) to someone starting out afresh with reference management but its bibtex output is not quite as convenient as Mendeley's)\n\nIf you have multiple bibliography files this can be done:\n  \n  ```yaml\n  bibliography: [multiple.bib, dotbib.bib, files.bib]\n  ```\n\nIncluding a `csl` option allows you to specify a citation style using the `.csl` format. The specific citations styles of numerous journals in `.csl` format can be found [here](https://github.com/citation-style-language/styles). Including the `link-citations: yes` option will create hyperlinks from the in-text references to the full citations at the end of the document.\n\nBy default the bibliography is placed at the very end of your document, so simply placing a `# References` header at the end of your document helps to separate your bibliography from the body of your text and puts an entry for it in the table of contents. If however you have some appendices to add after your references placing this HTML snippet in your Rnotebook should set the position at which the references will be rendered: `<div id=\"refs\"></div>`. Helpfully this will set the postion in both HTML and PDF outputs. (This may not work with older versions of `pandoc`).\n\n# Executing an Rnotebook with params\n\nWhilst you can render your Rnotebook with a one line `R` command from your terminal if you have a lot of params it can get unwieldy, you may also want to be able to reproduce your render at a later time or even submit it as a job to a batch computing manager. To do this you can create simple bash scripts like the one below to render your Rnotebook.\n\n  ```bash\n  #!/bin/bash\n  R --no-save --no-restore <<EOF\n  rmarkdown::render(\n  \t'notebook.Rmd',\n  \toutput_file = 'notebook.html',\n  \tparams = list(\n  \t\tbib = \"path/to/some/bib.bib\"\n  \t)\n  )\n  EOF\n  \n  ```\n\nThe `--no-save` option prevents `R` from saving your notebook's R session, and the `--no-restore` option prevents your Rnotebook from loading whatever random previous `R` session files you have lying around in your working directory into it's session.\n\n# Full Length Example YAML header\n\n  ```yaml\n  ---\n  title: \"A thing I'm Working on - Ideally with a more descriptive title\"\n  author: \"Richard J. Acton\"\n  date: \"2022-12-10\"\n  output: # Specifying multiple outputs appears to favour the first\n    pdf_document:\n      toc: yes\n      fig_caption: yes\n      df_print: kable\n    html_document:\n      fig_caption: yes\n      number_sections: yes\n      toc: yes\n      toc_float: yes\n      df_print: paged\n    html_notebook: # This determines the RStuido preview format\n      fig_caption: yes\n      number_sections: yes\n      toc: yes\n      toc_float: yes\n  bibliography: \"/home/rstudio/Documents/bibtex/library.bib\"\n  csl: \"/home/rstudio/Documents/bibtex/genomebiology.csl\"\n  link-citations: yes # make citations hyperlinks\n  linkcolor: blue\n  ---\n  ```\n\n# Resources\n\n- [R Markdown The Definitive Guide][1]\n- [Citation Style Launguage Styles Repository](https://github.com/citation-style-language/styles)\n\n[1]: https://bookdown.org/yihui/rmarkdown/\n\n*Feedback is always welcome, especially if you spot any mistakes.*\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}